<app-navbar></app-navbar>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
        <title>CIMF - Centre Informatique de Ministère des Finances</title>
        <meta content="Admin Dashboard" name="description" />
        <meta content="Themesbrand" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    </head>
    <body>
        <div class="header-bg">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-title-box">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <h4 class="page-title mb-0">إدارة المستخدمين</h4>
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a routerLink="/">CIMF</a></li>
                                        <li class="breadcrumb-item active" aria-current="page">إدارة المستخدمين</li>
                                    </ol>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                              <div class="text-center mt-3 mb-4">
                                <button (click)="goTo()" class="btn btn-primary btn-lg btn-block btnadd">
                                  إضافة حساب جديد للموظفين
                                </button>
                              </div>
                                <h4 class="mt-0 header-title">المستخدمين</h4>

                                <div class="table-responsive mt-4">
                                    <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8 table table-hover mb-0">
                                      <ng-container matColumnDef="idUnique">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header><h6>المعرف الوحيد</h6></th>
                                        <td mat-cell *matCellDef="let user"> <strong>{{user.idUnique}}</strong> </td>
                                      </ng-container>

                                      <ng-container matColumnDef="matricule">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header><h6>المعرف الداخلي</h6></th>
                                        <td mat-cell *matCellDef="let user"> <strong>{{user.matricule}}</strong> </td>
                                      </ng-container>

                                      <ng-container matColumnDef="nomPrenom">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header><h6>الإسم و اللقب</h6></th>
                                        <td mat-cell *matCellDef="let user"> <strong>{{user.nomPrenom}}</strong> </td>
                                      </ng-container>

                                      <ng-container matColumnDef="role">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header><h6>المنصب</h6></th>
                                          <td mat-cell *matCellDef="let user"> <strong>{{user.role}}</strong> </td>
                                      </ng-container>

                                      <ng-container matColumnDef="action">
                                        <th mat-header-cell *matHeaderCellDef><h6></h6></th>
                                        <td  mat-cell *matCellDef="let user">
                                          <button type="button" class="btn btn-primary btn-lg mx-2" (click)="onClick(user)">تعديل <fa-icon [icon]="faUserEdit"></fa-icon></button>
                                          <button type="button" class="btn btn-danger btn-lg mx-2" (click)="deleteEmploye(user._id)">حذف <fa-icon [icon]="faTrash"></fa-icon></button>
                                        </td>
                                      </ng-container>

                                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                  </table>

                                  <div class="overlay" *ngIf="popup">
                                    <div class="popup">
                                      <a class="close" (click)="popup = false">&times;</a>
                                      <div class="content">
                                        <app-update-utilisateur [user]="usert"></app-update-utilisateur>
                                      </div>
                                    </div>
                                  </div>
                                </div>



                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
